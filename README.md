# UFO猫をつかまえろ!!

## ゲーム概要

数々の似ている「UFO猫」の中から、初めに知らされたターゲットと同じ猫を捕まえましょう！

### レベル

複数の「レベル」があり、どんどん難易度も上がっていきます。猫を間違えたか、最後のレベルまで到達したらゲームオーバーです。

### スコア

「スコア」はレベルごとに集計され、最後に合計されます。ターゲットと違っていてもスコアは入りますが、見事正解したり、速く捕まえたり、更に連続正解したりすると、どんどんボーナスが入ります。

### おもしろさのコア

集中力と判断力、短記憶力が問われます！ささっとターゲットを覚えて、たくさん現れる外見や特徴の似た猫の中から1つを見つけ出すのがコアになる遊びです。
また、UFO猫の動きも多彩で眺め甲斐があります。ですがプレイの際は集中です！

## 使用素材

### 画像アセット

(1) 猫のイラスト素材

[猫画工房](https://nekoillust.com/)
- [『まんじゅう猫全身A』全種](https://nekoillust.com/manju-cat-whole-body-a/2/)
- [『肉球足跡』](https://nekoillust.com/category/other/%e8%82%89%e7%90%83%e8%b6%b3%e8%b7%a1/)

(2) UFOのイラスト素材

[illust image | イラストイメージ](https://illustimage.com/)
- [『未確認飛行物体UFOイラスト』](https://illustimage.com/?id=10469)
使用にあたり画像データの加工をさせていただいております。

- 背景イラスト画像については、ChatGPT による画像生成を利用しております。

### フォントアセット

(1) たぬき油性マジック / Yusei Magic
- [たぬき油性マジック - たぬきフォント](https://tanukifont.com/tanuki-permanent-marker/)

(2) こはるいろサンレイ
- [（配布サイト）](http://getsuren.com/)

---

## 実装のポイント

以下に、このゲームの制作において実装でこだわった点を掲載します。

<details>

  <summary>「レベルの設定データ」をJSONデータに書いて、それをプログラムで解析し、反映する</summary>

  - 最終的な目標は、JSONを編集するだけで容易にレベルの仕様変更が行えることでした。
  - この目標に対して、言語的に困難な仕様となっていたのが、C++でのコンパイル時に決まるデータとそうでないデータの取り扱い、そして型変換のシビアさという点です。
  - リファレンスを調べたり、ChatGPTと何度も対話を繰り返したりして、思った通りのコード構成と動作に落とし込むことができました。
  
</details>

<details>

  <summary>GUIのコンポーネントを自力で実装する</summary>

  - ボタンやプログレスバー、テキストボックスやスクロール可能なウィンドウなどを実装しました。
  - Siv3DのGUIは元々シンプルなもののみ提供されていたため、高機能で且つゲームの雰囲気に合うデザインにするために、リファレンス等を参考にしながら自分で実装しました。
  - クラスの継承を用いつつ実装し、クラス外部からGUIコンポーネントをまとめて管理したり（リストに入れる）、更新処理などの共通動作をまとめて実行したりできるように設計しました。
  - 特にスクロールを作るのが最も困難でした。何回も計算ミスや勘違いによって参照する変数の値を間違えたために、期待通りの挙動にならなかったことが、実装の遅延につながってしまいました。
  - しかし、スクロール機構の考え方については、以前から取り扱っているHTMLやJavaScriptでのWebページ制作の経験が役に立ったと感じております。
  
</details>

 <details>

  <summary>ロード時間とメモリ使用量の削減</summary>

  - 元々開発当初から、アプリケーションの初回起動時に登場するUFO猫のすべてのテクスチャを読み込み、実際に生成するオブジェクトとして確保するようにしていました。
  - しかし、音声など、テクスチャ以外のアセットを読み込むことが増えてきた結果、起動時のロードが顕著に遅くなり、メモリ使用量もピークが 1GB を超えていました。また、生成のためのオブジェクトを常に保持していることにより、メモリ使用量は 700MB 程度と高いまま推移していました。
  - それを解決するために、Siv3D の機能である「テクスチャアセット」を使用し、テクスチャは必要になったときに必要な分だけ非同期でロードし、実生成するオブジェクトを常に保持しないように管理方法を変更しました。それによって起動時間は縮まり、メモリ使用量も平均して200MB台を維持するようになりました。

 </details>

 ## 今後の改善点

- リザルトシーンの作りこみが甘いため、スコアの内訳を見れるようにしたり、これまでの記録も見れるようにしたりする
- もう1つ猫の動き方のバリエーションを考えているため、それの実現方法について考え、実装していく
- 手短にチュートリアルをつくり、遊び方を言葉以外の表現で伝える
